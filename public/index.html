
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Play.ht TTS</title>
  <style>
    body {
      font-family: sans-serif;
      background: #121212;
      color: white;
      padding: 2rem;
    }
    #status {
      margin-top: 1rem;
    }
    .success {
      color: lightgreen;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <h2>üé§ Type to Speak with Play.ht</h2>
  <textarea id="text" rows="5" cols="50" placeholder="Type something..." style="width: 100%;"></textarea>
  <br><br>
  <label for="voice">Select Voice:</label><br>
  <select id="voice">
    <option value="s3://voice-cloning-zero-shot/--ZmP68iZ-Gd_LxyVx2C9/stalker/manifest.json">Stalker</option>
    <option value="s3://voice-cloning-zero-shot/-mclt8urjjQX6KSOD-SpN/york/manifest.json">Ripper</option>
    <option value="s3://voice-cloning-zero-shot/5eTQqEIfsDVfC_xuYSJ2d/josef/manifest.json">Josef</option>
    <option value="s3://voice-cloning-zero-shot/PhpYXU98ksvRQpKiwX-fz/letby/manifest.json">Letby</option>
    <option value="s3://voice-cloning-zero-shot/looTf0NVHGP5N33Xt3bMJ/shannon/manifest.json">Shannon</option>
    <option value="s3://voice-cloning-zero-shot/mxG-JSMwfhNaVWVLqawsg/jimy/manifest.json">Jimmy</option>
    <option value="s3://voice-cloning-zero-shot/xBdn4KI3fopPTXqnrBGkk/hunts/manifest.json">Hunt</option>
    <option value="s3://voice-cloning-zero-shot/xReT7HapjXaa2xCkLCRbb/andrew/manifest.json">Prince</option>
    <option value="s3://voice-cloning-zero-shot/xhzY33B1Yz3B-ZtcNnUOJ/ted/manifest.json">Ted</option>
  </select>
  <br><br>
  <button onclick="sendToTTS()">üîä Speak</button>
  <p id="status"></p>
  <audio id="player" controls style="margin-top: 2rem; display: none;"></audio>

  <script>
    async function sendToTTS() {
      const text = document.getElementById("text").value;
      const voice = document.getElementById("voice").value;
      const status = document.getElementById("status");
      const player = document.getElementById("player");

      status.innerText = "üéôÔ∏è Sending...";
      status.className = '';
      player.style.display = "none";

      try {
        const res = await fetch('/api/tts', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text, voice, speed: parseFloat(document.getElementById('speed').value), sample_rate: parseInt(document.getElementById('sampleRate').value) })
        });

        if (!res.ok) {
          const error = await res.json();
          status.innerText = "‚ùå Error: " + (error.details || error.error);
          status.className = 'error';
          return;
        }

        const blob = await res.blob();
        const audioUrl = URL.createObjectURL(blob);
        player.src = audioUrl;
        player.style.display = "block";
        player.play();
        status.innerText = "‚úÖ Voice stream ready!";
        status.className = 'success';
      } catch (err) {
        status.innerText = "‚ùå Failed: " + err.message;
        status.className = 'error';
      }
    }
  </script>
</body>
</html>
